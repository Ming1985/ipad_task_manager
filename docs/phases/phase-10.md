# Phase 10: 积分系统

**类型:** ui
**状态:** pending
**相关 FR:** FR-4, FR-10

## 目标

实现完整的积分系统，包括积分获取、消费、奖励商城。

## 涉及的 User Stories

- US-014: 积分系统
- US-015: 奖励商城
- US-016: 家长配置奖励项目

## 任务清单

### 积分管理
- [ ] 积分余额显示组件
- [ ] 积分历史记录页面
- [ ] 获得/消费记录区分显示
- [ ] PointTransaction 数据操作

### 家长积分调整
- [ ] 手动加减积分界面
- [ ] 调整原因记录
- [ ] 操作确认

### 奖励商城（孩子端）
- [ ] 奖励列表页面
- [ ] 奖励卡片：名称、描述、所需积分、图标
- [ ] 兑换按钮和确认流程
- [ ] 积分不足提示

### 奖励配置（家长端）
- [ ] 奖励列表管理
- [ ] 添加自定义奖励
- [ ] 设置所需积分
- [ ] 设置奖励类型（自动生效/需确认）
- [ ] 启用/禁用奖励
- [ ] 预设奖励模板

### 预设奖励
- [ ] 游戏时间奖励（30分钟=100积分等）
- [ ] 预设配置

## 验收标准
- [ ] 显示当前积分余额
- [ ] 积分历史记录（获得/消费）
- [ ] 支持家长手动调整积分
- [ ] 积分数据持久化存储
- [ ] 显示可兑换奖励列表
- [ ] 每个奖励显示：名称、描述、所需积分、图标
- [ ] 点击兑换后扣除积分并生效
- [ ] 家长可配置奖励项目
- [ ] 支持自定义奖励和预设奖励
- [ ] Typecheck 通过
- [ ] 使用 dev-browser skill 在模拟器中验证 UI

## 技术决策
| 决策 | 原因 |
|-----|------|

## 遇到的问题
| 问题 | 解决方案 |
|-----|---------|

## 测试清单 (ui)

### 自动化测试
- [ ] `xcodebuild build` 成功
- [ ] `xcodebuild test` UI 测试通过（如有 XCUITest）

### 手动验证
- [ ] 积分显示正确
- [ ] 历史记录按时间排序
- [ ] 兑换流程顺畅
- [ ] 积分扣除正确
- [ ] 奖励配置保存正常
- [ ] 空状态显示正确
- [ ] 横屏/竖屏适配
