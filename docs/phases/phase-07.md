# Phase 07: 任务跟踪

**类型:** system-api
**状态:** pending
**相关 FR:** FR-3, FR-4

## 目标

实现任务期间的 App 使用情况跟踪和交互情况监控。

## 涉及的 User Stories

- US-009: App 使用情况跟踪
- US-010: 交互情况跟踪

## 任务清单

### App 使用跟踪
- [ ] 通过 DeviceActivity framework 获取使用数据
- [ ] 记录任务期间各 App 使用时长
- [ ] 记录 App 切换行为
- [ ] 检测尝试使用非指定 App 的行为
- [ ] 数据存储到 AppUsageLog

### 交互情况跟踪
- [ ] 监测屏幕点击频率
- [ ] 检测长时间无操作
- [ ] 无操作提醒逻辑
- [ ] 计算会话活跃度评分

### 数据展示
- [ ] 家长端查看任务期间 App 使用详情
- [ ] 违规行为标记
- [ ] 活跃度评分显示

### 提醒功能
- [ ] 无操作超时提醒
- [ ] 配置提醒阈值

## 验收标准
- [ ] 通过 Screen Time API 获取 App 使用时长数据
- [ ] 记录任务期间的 App 切换行为
- [ ] 检测是否使用了非指定 App
- [ ] 记录屏幕点击频率
- [ ] 检测长时间无操作
- [ ] 无操作超过设定时间发送提醒
- [ ] 记录每次会话的活跃度评分
- [ ] 数据存储到本地
- [ ] Typecheck 通过

## 技术决策
| 决策 | 原因 |
|-----|------|

## 遇到的问题
| 问题 | 解决方案 |
|-----|---------|

## 测试清单 (system-api)

### 自动化测试
- [ ] `xcodebuild build` 成功
- [ ] 模拟器编译通过（API 存根）

### 手动验证 (真机必需)
- [ ] App 使用数据获取正常
- [ ] App 切换记录正确
- [ ] 违规行为检测生效
- [ ] 无操作提醒触发
- [ ] 活跃度评分计算正确
- [ ] 数据持久化正常
