# Phase 11: 游戏时间奖励

**类型:** system-api
**状态:** pending
**相关 FR:** FR-2

## 目标

实现任务完成后解锁游戏时间的奖励机制，包括时间倒计时和自动重新屏蔽。

## 涉及的 User Stories

- US-008: 任务完成解锁游戏时间

## 任务清单

### 游戏时间解锁
- [ ] 兑换游戏时间奖励后解锁指定 App
- [ ] 解锁时间根据积分或预设
- [ ] 使用 ManagedSettingsStore 移除特定 App 屏蔽

### 游戏时间倒计时
- [ ] 显示"游戏时间剩余 XX 分钟"
- [ ] 倒计时界面/悬浮窗
- [ ] 后台计时

### 自动重新屏蔽
- [ ] 时间到后自动重新屏蔽
- [ ] 使用 DeviceActivitySchedule 或定时器

### 提前提醒
- [ ] 提前 5 分钟发送提醒
- [ ] 提前 1 分钟发送提醒
- [ ] 提醒通知内容

### 状态管理
- [ ] 记录当前游戏时间状态
- [ ] App 重启后恢复状态

## 验收标准
- [ ] 任务完成后根据设置解锁指定 App
- [ ] 解锁时间根据积分兑换或家长预设
- [ ] 显示"游戏时间剩余 XX 分钟"倒计时
- [ ] 时间到后自动重新屏蔽游戏 App
- [ ] 提前 5 分钟和 1 分钟发送提醒
- [ ] Typecheck 通过

## 技术决策
| 决策 | 原因 |
|-----|------|

## 遇到的问题
| 问题 | 解决方案 |
|-----|---------|

## 测试清单 (system-api)

### 自动化测试
- [ ] `xcodebuild build` 成功
- [ ] 模拟器编译通过（API 存根）

### 手动验证 (真机必需)
- [ ] 游戏 App 正确解锁
- [ ] 倒计时准确显示
- [ ] 提前提醒通知正确发送
- [ ] 时间到后 App 重新被屏蔽
- [ ] App 重启后状态正确恢复
